{"version":3,"file":"main.js","mappings":"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","sources":["webpack://mesto-project-ff/./src/components/api.js","webpack://mesto-project-ff/./src/components/card.js","webpack://mesto-project-ff/./src/components/modal.js","webpack://mesto-project-ff/./src/components/validation.js","webpack://mesto-project-ff/./src/index.js"],"sourcesContent":["const config = {\r\n    baseUrl: 'https://nomoreparties.co/v1/wff-cohort-41',\r\n    headers: {\r\n        authorization: '7bcddfbe-b09d-482c-b0c1-bf3d57a4e0cf',\r\n        'Content-Type': 'application/json'\r\n    }\r\n};\r\n\r\nconst checkResponse = (res) => {\r\n    if (res.ok) {\r\n        return res.json();\r\n    }\r\n    return Promise.reject(`Ошибка: ${res.status}`);\r\n};\r\n\r\nexport const deleteCardApi = (idCardForDelete) => {\r\n    return fetch(`${config.baseUrl}/cards/${idCardForDelete}`, {\r\n        method: 'DELETE',\r\n        headers: config.headers\r\n    })\r\n    .then(checkResponse)\r\n};\r\n\r\nexport const formEditApi = (profileTitle, profileDescription) => {\r\n    return fetch(`${config.baseUrl}/users/me`, {\r\n        method: 'PATCH',\r\n        headers: config.headers,\r\n        body: JSON.stringify({\r\n            name: profileTitle,\r\n            about: profileDescription\r\n        })\r\n    })\r\n    .then(checkResponse)\r\n};\r\n\r\nexport const newCardApi = (cardName, cardLink) => {\r\n    return fetch(`${config.baseUrl}/cards`, {\r\n        method: 'POST',\r\n        headers: config.headers,\r\n        body: JSON.stringify({\r\n            name: cardName,\r\n            link: cardLink\r\n        })\r\n    })\r\n    .then(checkResponse)\r\n};\r\n\r\nexport const getUserData = () => {\r\n    return fetch(`${config.baseUrl}/users/me`, {\r\n        headers: config.headers,\r\n    })\r\n    .then(checkResponse)\r\n    .catch((err) => {\r\n        console.log(err);\r\n    })\r\n};\r\n\r\nexport const getAllCards = () => {\r\n    return fetch(`${config.baseUrl}/cards`, {\r\n        headers: config.headers,\r\n    })\r\n    .then(checkResponse)\r\n    .catch((err) => {\r\n        console.log(err);\r\n    })\r\n};\r\n\r\nexport const editAvatarApi = (avatarLink) => {\r\n    return fetch(`${config.baseUrl}/users/me/avatar`, {\r\n        method: 'PATCH',\r\n        headers: config.headers,\r\n        body: JSON.stringify({\r\n            avatar: avatarLink\r\n        })\r\n    })\r\n    .then(checkResponse)\r\n};\r\n\r\nexport const cardLikeDeleteApi = (cardId) => {\r\n    return fetch(`${config.baseUrl}/cards/likes/${cardId}`, {\r\n        method: 'DELETE',\r\n        headers: config.headers\r\n    })\r\n    .then(checkResponse)\r\n};\r\n\r\nexport const cardLikePutApi = (cardId) => {\r\n    return fetch(`${config.baseUrl}/cards/likes/${cardId}`, {\r\n        method: 'PUT',\r\n        headers: config.headers\r\n    })\r\n    .then(checkResponse)\r\n}","import { cardLikeDeleteApi, cardLikePutApi } from \"./api.js\";\r\n\r\n// @todo: Функция создания карточки\r\nexport function createCard(cardData, handleDeleteCard, handleClickImg, cardLike, userId) {\r\n    \r\n    // @todo: Темплейт карточки\r\n    const cardTemplate = document.querySelector('#card-template').content;\r\n\r\n    // @todo: DOM узлы\r\n    const cardElement = cardTemplate.cloneNode(true).querySelector('.card');\r\n    const cardImage = cardElement.querySelector('.card__image');\r\n    const cardTitle = cardElement.querySelector('.card__title');\r\n    const cardDeleteButton = cardElement.querySelector('.card__delete-button');\r\n    const cardLikeButton = cardElement.querySelector('.card__like-button');\r\n    const cardLikeNumber = cardElement.querySelector('.card__like-number');//создадим переменую количества лайков\r\n    \r\n    cardImage.src = cardData.link;\r\n    cardImage.alt = cardData.name;\r\n    cardTitle.textContent = cardData.name;\r\n    cardLikeNumber.textContent = cardData.likes.length;//присвоим значение длины массива лайков, полученное с сервера\r\n\r\n    // показ или нет кнопки удаления и слушатель кнопки удаления\r\n    if (cardData.owner._id !== userId) {\r\n        cardDeleteButton.remove();\r\n    } else {\r\n        cardDeleteButton.addEventListener('click', () => {\r\n            handleDeleteCard(cardData._id, cardElement);\r\n        });\r\n    };\r\n\r\n    // слушатель разворачивания картинки при клике\r\n    cardImage.addEventListener('click', () => {\r\n        handleClickImg(cardData.link, cardData.name);\r\n    });\r\n\r\n    // слушатель и вызов функции лайка карточки\r\n    cardLikeButton.addEventListener('click', () => {\r\n        cardLike(cardLikeButton, cardData._id, cardLikeNumber);\r\n    });\r\n\r\n    // Проверяем, лайкнул ли текущий пользователь карточку\r\n    const isLiked = cardData.likes.some(like => like._id === userId);\r\n    if (isLiked) {\r\n        cardLikeButton.classList.add('card__like-button_is-active');\r\n    };\r\n\r\n    return cardElement;\r\n};\r\n\r\n// скрипт лайка карточки\r\nexport function cardLike(cardLikeButton, cardId, cardLikeNumber) {\r\n    const cardLikedStatus = cardLikeButton.classList.contains('card__like-button_is-active');\r\n    if (cardLikedStatus) {\r\n        cardLikeDeleteApi (cardId)\r\n        .then(data => {\r\n            // Удаляем класс лайка\r\n            cardLikeButton.classList.remove('card__like-button_is-active');\r\n            cardLikeNumber.textContent = data.likes.length;\r\n        })\r\n        .catch(err => {\r\n            console.log(err);\r\n        })\r\n    } else {\r\n        cardLikePutApi (cardId)\r\n        .then(data => {\r\n            // добавим класс лайка\r\n            cardLikeButton.classList.add('card__like-button_is-active');\r\n            cardLikeNumber.textContent = data.likes.length;\r\n        })\r\n        .catch(err => {\r\n            console.log(err);\r\n        })\r\n    }\r\n};\r\n","// Функция открытия модального окна\r\nexport function openModal(popup) {\r\n    popup.classList.add('popup_is-opened');\r\n    \r\n    //добавим обработчик закрытия окна по кнопке Escape\r\n    const handleCloseEsc = (event) => {\r\n        if (event.key === 'Escape') {\r\n            closeModal(popup);\r\n        }\r\n    };\r\n\r\n    document.addEventListener('keydown', handleCloseEsc);\r\n    popup.handleCloseEsc = handleCloseEsc;\r\n};\r\n\r\n// Функция закрытия модального окна\r\nexport function closeModal(popup) {\r\n    popup.classList.remove('popup_is-opened');\r\n    \r\n    //удалим обработчик закрытия окна\r\n    document.removeEventListener('keydown', popup.handleCloseEsc);\r\n    delete popup.handleCloseEsc;\r\n};\r\n\r\n\r\n","//функции проверки на валидность и вывода и удаления сообщений\r\n//напишем функцию показа сообщения об ошибке\r\nconst showInputError = (formElement, inputElement, errorMessage) => {\r\n    const errorElement = formElement.querySelector(`.${inputElement.id}-error`);\r\n    if (errorElement) {\r\n        inputElement.classList.add('popup__input_type_error');\r\n        errorElement.textContent = errorMessage;\r\n        errorElement.classList.add('popup__input-error_active');\r\n    }\r\n};\r\n\r\n//Напишем функцию удаления сообщения об ошибке\r\nconst hideInputError = (formElement, inputElement) => {\r\n    const errorElement = formElement.querySelector(`.${inputElement.id}-error`);\r\n    if (errorElement) {\r\n        inputElement.classList.remove('popup__input_type_error');\r\n        errorElement.textContent = '';\r\n        errorElement.classList.remove('popup__input-error_active');\r\n    }\r\n};\r\n\r\n//напишем функцию проверки полей на валидность\r\nconst isValid = (formElement, inputElement) => {\r\n    if (inputElement.validity.patternMismatch) {\r\n        inputElement.setCustomValidity(inputElement.dataset.errorMessage);\r\n    } else {\r\n        inputElement.setCustomValidity(\"\");\r\n    }\r\n    if (!inputElement.validity.valid) {\r\n        showInputError(formElement, inputElement, inputElement.validationMessage);\r\n    } else {\r\n        hideInputError(formElement, inputElement);\r\n    }\r\n};\r\n\r\n//функция проверки полей формы на валидность и возврата результата проверки\r\nconst hasInvalidInput = (inputList) => {\r\n    return inputList.some((inputElement) => {\r\n        return !inputElement.validity.valid;\r\n    });\r\n};\r\n\r\n//функция стилизации кнопки (активна или нет)\r\nconst toogleButtonState = (inputList, buttonElement) => {\r\n    if (hasInvalidInput(inputList)) {\r\n        buttonElement.disabled = true;\r\n        buttonElement.classList.add('popup__button_disabled');\r\n    } else {\r\n        buttonElement.disabled = false;\r\n        buttonElement.classList.remove('popup__button_disabled');\r\n    }\r\n};\r\n\r\n//добавим обработчики всем полям формы\r\nconst setEventListeners = (formElement) => {\r\n    const inputList = Array.from(formElement.querySelectorAll('.popup__input'));\r\n    const buttonElement = formElement.querySelector('.popup__button'); //выберем кнопку сабмита\r\n    inputList.forEach((inputElement) => {\r\n        inputElement.addEventListener('input', () => {\r\n            isValid(formElement, inputElement);\r\n            toogleButtonState(inputList, buttonElement); //вызовем функцию смены статуса кнопки сабмита\r\n        });\r\n    });\r\n};\r\n\r\n//добавим обработчики на все формы\r\nexport const enableValidation = () => {\r\n    const formList = Array.from(document.querySelectorAll('.popup__form'));\r\n    formList.forEach((formElement) => {\r\n        setEventListeners(formElement);\r\n    });\r\n};\r\n\r\n\r\n\r\n//функция очистки ошибок валидации в формах\r\nexport function clearValidation(formElement, settings) {\r\n    // Находим все поля ввода в форме\r\n    const inputList = Array.from(formElement.querySelectorAll(settings.inputSelector));\r\n    \r\n    // Очищаем ошибки для каждого поля ввода\r\n    inputList.forEach((inputElement) => {\r\n        hideInputError(formElement, inputElement);\r\n    });\r\n};\r\n\r\n","import './pages/index.css';\r\nimport { createCard, cardLike } from './components/card.js';\r\nimport { openModal, closeModal } from './components/modal.js';\r\nimport { enableValidation, clearValidation } from \"./components/validation.js\";\r\nimport { deleteCardApi, formEditApi, newCardApi, getUserData, getAllCards, editAvatarApi } from \"./components/api.js\";\r\n\r\n// создадим контейнер для вывода карточек на страницу\r\nconst placesList = document.querySelector('.places__list');\r\n\r\n// Находим все модальные окна\r\nconst popupEdit = document.querySelector('.popup_type_edit');\r\nconst popupNew = document.querySelector('.popup_type_new-card');\r\nconst popupImg = document.querySelector('.popup_type_image');\r\n\r\n// Находим элементы для вызова модальных окон\r\nconst buttonEdit = document.querySelector('.profile__edit-button');\r\nconst buttonAdd = document.querySelector('.profile__add-button');\r\n\r\n//находим кнопку отправки данных модального окна создания новой карточки\r\nconst buttonCloseAdd = popupNew.querySelector('.popup__button');\r\n\r\n// Обработчик для вызова модального окна редактирования профиля\r\nbuttonEdit.addEventListener('click', () => {\r\n    openModal(popupEdit);\r\n    nameInput.value = profileTitle.textContent;\r\n    jobInput.value = profileDescription.textContent;\r\n    clearValidation(formEdit, validationSettings);\r\n});\r\n// Обработчик для вызова модального окна добавления карточки\r\nbuttonAdd.addEventListener('click', () => {\r\n    formAddNewCard.reset();\r\n    openModal(popupNew);\r\n    clearValidation(formAddNewCard, validationSettings);\r\n});\r\n\r\n// Находим все модальные окна\r\n// Для каждого модального окна вешаем обработчики закрытия на оверлей и крестик\r\nconst popups = document.querySelectorAll('.popup');\r\npopups.forEach((popup) => {\r\n    popup.addEventListener('click', function (event) {\r\n        if (event.target.classList.contains('popup__close') || event.target === popup) {\r\n        closeModal(popup);\r\n        }\r\n    });\r\n});\r\n\r\n//Функция вывода popup-картинки на страницу при клике\r\nfunction handleClickImg(link, name) {\r\n    const modalImage = popupImg.querySelector('.popup__image');\r\n    const modalCaption = popupImg.querySelector('.popup__caption');\r\n    modalImage.src = link;\r\n    modalImage.alt = name;\r\n    modalCaption.textContent = name;\r\n    openModal(popupImg);\r\n};\r\n\r\n\r\n\r\n\r\n\r\n// Находим попап подтверждения удаления\r\nconst popupConfirm = document.querySelector('.popup_type_confirm');\r\nconst formConfirm = popupConfirm.querySelector('.popup__form');\r\nconst buttonCloseDelete = formConfirm.querySelector('.popup__button');\r\n\r\n// Переменные для хранения данных об удаляемой карточке\r\nlet idCardForDelete;\r\nlet cardForDelete;\r\n\r\n// Функция удаления карточки\r\nfunction handleDeleteCard(id, cardElement) {\r\n    idCardForDelete = id;\r\n    cardForDelete = cardElement;\r\n    openModal(popupConfirm);\r\n}\r\n\r\n// Обработчик подтверждения удаления\r\nfunction handleConfirmDelete(event) {\r\n    event.preventDefault();\r\n\r\n    const initialTextDelete = buttonCloseDelete.textContent;\r\n    // Меняем текст кнопки на \"Удаление...\"\r\n    buttonCloseDelete.textContent = 'Удаление...';\r\n\r\n    deleteCardApi(idCardForDelete)\r\n    .then(() => {\r\n        // Удаляем карточку из DOM\r\n        cardForDelete.remove();\r\n        closeModal(popupConfirm);\r\n    })\r\n    .catch(err => {\r\n        console.log(err);\r\n    })\r\n    .finally(() => {\r\n    // Возвращаем исходный текст кнопки\r\n    buttonCloseDelete.textContent = initialTextDelete;\r\n    })\r\n}\r\nbuttonCloseDelete.addEventListener('click', handleConfirmDelete);\r\n\r\n\r\n\r\n\r\n// скрипт редактирования данных профиля\r\n// Находим форму в DOM\r\nconst formEdit = document.querySelector('form[name=\"edit-profile\"]');\r\n// Находим поля формы в DOM\r\nconst nameInput = formEdit.querySelector('.popup__input_type_name');\r\nconst jobInput = formEdit.querySelector('.popup__input_type_description');\r\n// Получим значение полей jobInput и nameInput из свойства value\r\nconst profileTitle = document.querySelector('.profile__title');\r\nconst profileDescription = document.querySelector('.profile__description');\r\n\r\n// Обработчик «отправки» формы на редактирование профиля\r\nfunction handleFormEdit(event) {\r\n    event.preventDefault();\r\n    // Вставим новые значения с помощью textContent\r\n    profileTitle.textContent = nameInput.value;\r\n    profileDescription.textContent = jobInput.value;\r\n\r\n    const submitButtonEdit = formEdit.querySelector('.popup__button');\r\n    const initialTextEdit = submitButtonEdit.textContent;\r\n    // Меняем текст кнопки на \"Сохранение...\"\r\n    submitButtonEdit.textContent = 'Сохранение...';\r\n\r\n    formEditApi (profileTitle.textContent, profileDescription.textContent)\r\n    .then(() => {\r\n        //закроем окно принудительно\r\n        closeModal(popupEdit);\r\n    })\r\n    .catch((err) => {\r\n        console.log(err);\r\n    })\r\n    .finally(() => {\r\n    // Возвращаем исходный текст кнопки\r\n    submitButtonEdit.textContent = initialTextEdit;\r\n    })\r\n};\r\nformEdit.addEventListener( 'submit', handleFormEdit );\r\n\r\n\r\n\r\n\r\n// скрипт добавления новой карточки\r\n// Находим форму в DOM\r\nconst formAddNewCard = document.querySelector('form[name=\"new-place\"]');\r\n// Обработчик «отправки» формы новой карточки\r\nfunction handleNewCard(event) {\r\n    event.preventDefault();\r\n    // Получаем данные из формы\r\n    let cardData = {\r\n        name: formAddNewCard.querySelector('.popup__input_type_card-name').value,\r\n        link: formAddNewCard.querySelector('.popup__input_type_url').value\r\n    };\r\n    const submitButtonAddCard = formAddNewCard.querySelector('.popup__button');\r\n    const initialTextAddCard = submitButtonAddCard.textContent;\r\n    // Меняем текст кнопки на \"Сохранение...\"\r\n    submitButtonAddCard.textContent = 'Сохранение...';\r\n    //отправим карточку на сервер после добавления в DOM\r\n    newCardApi (cardData.name, cardData.link)\r\n    .then(newCard => {\r\n        // Создаем карточку\r\n        const cardNew = createCard(newCard, handleDeleteCard, handleClickImg, cardLike, userId);\r\n        // Добавляем карточку в начало контейнера\r\n        placesList.prepend(cardNew);\r\n        // Закрываем попап и очищаем форму\r\n        closeModal(popupNew);\r\n        formAddNewCard.reset();\r\n        //уберем активность кнопки при открытии окна\r\n        buttonCloseAdd.disabled = true;\r\n        buttonCloseAdd.classList.add('popup__button_disabled');\r\n    })\r\n    .catch((err) => {\r\n        console.log(err);\r\n    })\r\n    .finally(() => {\r\n    // Возвращаем исходный текст кнопки\r\n    submitButtonAddCard.textContent = initialTextAddCard;\r\n    })\r\n};\r\nformAddNewCard.addEventListener( 'submit', handleNewCard );\r\n\r\n\r\n\r\n\r\n//скрипт общей проверки на валидность\r\nconst validationSettings = {\r\n    formSelector: '.popup__form',\r\n    inputSelector: '.popup__input',\r\n    submitButtonSelector: '.popup__button',\r\n    inactiveButtonClass: 'popup__button_disaibled',\r\n    inputErrorClass: 'popup__input_type_error',\r\n    errorClass: 'popup__input-error_active'\r\n};\r\n//вызовем функцию\r\nenableValidation(validationSettings);\r\n\r\n\r\n\r\n\r\n//скрипт загрузки данных профиля и карточек с сервера\r\nlet userId = null;\r\n\r\nPromise.all([getUserData(), getAllCards()])\r\n    .then(([userData, cards]) => {\r\n        userId = userData._id;\r\n        profileTitle.textContent = userData.name;\r\n        profileDescription.textContent = userData.about;\r\n        profileAvatar.src = userData.avatar;\r\n        cards.forEach((cardData) => {\r\n            const cardElement = createCard(\r\n                cardData, \r\n                handleDeleteCard, \r\n                handleClickImg, \r\n                cardLike,\r\n                userId\r\n            );\r\n            placesList.append(cardElement);\r\n        })\r\n    })\r\n    .catch((err) => {\r\n        console.log(err);\r\n    });\r\n\r\n\r\n\r\n\r\n\r\n\r\n//смена аватарки при клике на нее\r\nconst avatarEdit = document.querySelector('.profile__image-edit');\r\nconst popupAvatar = document.querySelector('.popup__avatar-edit');\r\nconst formEditAvatar = popupAvatar.querySelector('.popup__form');\r\nconst avatarLinkInput = formEditAvatar.querySelector('.popup__input_avatar_url');\r\nconst profileAvatar = document.querySelector('.profile__image');\r\n\r\n\r\nfunction handleEditAvatar(event) {\r\n    event.preventDefault();\r\n\r\n    const submitButtonAva = formEditAvatar.querySelector('.popup__button');\r\n    const initialTextAva = submitButtonAva.textContent;\r\n    // Меняем текст кнопки на \"Сохранение...\"\r\n    submitButtonAva.textContent = 'Сохранение...';\r\n\r\n    //отправим на сервер\r\n    editAvatarApi (avatarLinkInput.value)\r\n    .then(data => {\r\n        // Обновляем аватар на странице\r\n        profileAvatar.src = data.avatar;\r\n        closeModal(popupAvatar);\r\n    })\r\n    .catch((err) => {\r\n        console.log(err);\r\n    })\r\n    .finally(() => {\r\n    // Возвращаем исходный текст кнопки\r\n    submitButtonAva.textContent = initialTextAva;\r\n    })\r\n};\r\nformEditAvatar.addEventListener( 'submit', handleEditAvatar );\r\n\r\n\r\n\r\n// слушатель для вызова модального окна изменения аватарки\r\navatarEdit.addEventListener('click', () => {\r\n    openModal(popupAvatar);\r\n    avatarLinkInput.value = profileAvatar.textContent;\r\n    clearValidation(formEditAvatar, validationSettings);\r\n});\r\n"],"names":["config","baseUrl","headers","authorization","checkResponse","res","ok","json","Promise","reject","concat","status","createCard","cardData","handleDeleteCard","handleClickImg","cardLike","userId","cardElement","document","querySelector","content","cloneNode","cardImage","cardTitle","cardDeleteButton","cardLikeButton","cardLikeNumber","src","link","alt","name","textContent","likes","length","owner","_id","remove","addEventListener","some","like","classList","add","cardId","contains","fetch","method","then","cardLikeDeleteApi","data","catch","err","console","log","cardLikePutApi","openModal","popup","handleCloseEsc","event","key","closeModal","removeEventListener","hideInputError","formElement","inputElement","errorElement","id","clearValidation","settings","Array","from","querySelectorAll","inputSelector","forEach","placesList","popupEdit","popupNew","popupImg","buttonEdit","buttonAdd","buttonCloseAdd","modalImage","modalCaption","nameInput","value","profileTitle","jobInput","profileDescription","formEdit","validationSettings","formAddNewCard","reset","target","idCardForDelete","cardForDelete","popupConfirm","buttonCloseDelete","preventDefault","initialTextDelete","deleteCardApi","finally","submitButtonEdit","initialTextEdit","body","JSON","stringify","about","formEditApi","cardName","cardLink","submitButtonAddCard","initialTextAddCard","newCard","cardNew","prepend","disabled","formSelector","submitButtonSelector","inactiveButtonClass","inputErrorClass","errorClass","inputList","buttonElement","validity","patternMismatch","setCustomValidity","dataset","errorMessage","valid","showInputError","validationMessage","isValid","hasInvalidInput","toogleButtonState","setEventListeners","all","_ref","_ref2","userData","cards","profileAvatar","avatar","append","avatarEdit","popupAvatar","formEditAvatar","avatarLinkInput","avatarLink","submitButtonAva","initialTextAva"],"sourceRoot":""}